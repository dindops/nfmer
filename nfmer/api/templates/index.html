{% extends 'base.html' %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title mb-0">NFMinder Search</h3>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <div class="btn-group w-100" role="group">
                        <input type="radio" class="btn-check" name="type" id="composers" value="composers" autocomplete="off" checked
                               hx-get="{{ url_for('search_results') }}"
                               hx-target="#search-results"
                               hx-include="#search-input"
                               hx-trigger="change, click">
                        <label class="btn btn-outline-primary" for="composers">Composers</label>

                        <input type="radio" class="btn-check" name="type" id="compositions" value="compositions" autocomplete="off"
                               hx-get="{{ url_for('search_results') }}"
                               hx-target="#search-results"
                               hx-include="#search-input"
                               hx-trigger="change, click">
                        <label class="btn btn-outline-primary" for="compositions">Compositions</label>
                    </div>
                </div>

                <div class="input-group mb-3">
                    <input
                        type="text"
                        id="search-input"
                        name="q"
                        class="form-control"
                        placeholder="Start typing to search..."
                        hx-get="{{ url_for('search_results') }}"
                        hx-trigger="keyup changed delay:300ms, search"
                        hx-target="#search-results"
                        hx-include="[name='type']:checked"
                        hx-indicator="#search-spinner"
                    >
                    <span class="input-group-text">
                        <div id="search-spinner" class="spinner-border spinner-border-sm" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </span>
                </div>

                <div id="search-results" class="search-results">
                    <p class="text-center text-muted">Enter your search terms above</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
